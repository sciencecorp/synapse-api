syntax = "proto3";

package synapse;

import "google/protobuf/empty.proto";
import "node.proto";

enum SynapseStatus {
  kOk = 0;
  kUndefinedError = 1;
}

message StatusResponse {
  string message = 1;
  SynapseStatus code = 2;
}

message SynapsePeripheral {
  NodeType peripheral_type = 1;
  uint32 peripheral_id = 2;
  NodeInfo peripheral_info = 3;
}

message DeviceInfo {
  string name = 1;
  uint64 serial = 2;
  uint32 synapse_version = 3;
  uint32 firmware_version = 4;
  repeated SynapsePeripheral peripherals = 5;
}

message DeviceConfiguration {
  repeated NodeInfo nodes = 1;
  repeated NodeConnection connections = 2;
}

service SynapseDevice {
  rpc Info(google.protobuf.Empty) returns (DeviceInfo) {}
  rpc Configure(DeviceConfiguration) returns (StatusResponse) {}
  rpc Start(google.protobuf.Empty) returns (StatusResponse) {}
  rpc Stop(google.protobuf.Empty) returns (StatusResponse) {}
}